#!/bin/sh
# ------------------------------------------------------------------------------------------
#
# 	ПАКЕТ КВАС ЛАЙТ
#
# ------------------------------------------------------------------------------------------
# 	https://github.com/ndmsystems/packages/wiki/Opkg-Component 
#	основными задачами являются:
# ------------------------------------------------------------------------------------------
#	Разработчик: carIod
#	Дата создания: 10/06/2025
#	Лицензия: Apache License 2.0
#   github: https://github.com/carIod/kvl
#	На основе https://github.com/qzeleza/kvas используется на условиях лицензии Apache 2.0.
# ------------------------------------------------------------------------------------------
[ "${1}" != "hook" ] && exit 0
[ -z "$id" ] && exit 1
# shellcheck source=opt\bin\libs\env.sh
. /opt/apps/kvl/bin/libs/env.sh

# В случае, если созданное подключение уже есть в списке интерфейсов,
# удаляем его из файла /opt/etc/inface_equals
if grep -q "^${id}|" "${INFACE_NAMES_FILE}"; then
   	escaped_id="${id//\//\\/}"  # Заменяет / на \/
   	sed -i "/^${escaped_id}|/d" "${INFACE_NAMES_FILE}"
fi
